

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Basic Functions &mdash; embARC Machine Learning Inference Library 1.00a documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="References" href="../final/references.html" />
    <link rel="prev" title="Helper Functions" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> embARC Machine Learning Inference Library
          

          
          </a>

          
            
            
              <div class="version">
                1.00a
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../initial/index.html">Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../initial/index.html#revision-history">Revision history</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mli_api_desc/index.html">Machine Learning Interface Library API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel_func_desc/index.html">Kernel Functions</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Helper Functions</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Basic Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-basic-element-size">Get Basic Element Size</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#api">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditions-for-applying-the-function">Conditions for Applying the Function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#count-number-of-elements">Count Number of Elements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#api-16">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditions-for-applying-the-function-5">Conditions for Applying the Function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#point-to-sub-tensor">Point to Sub-Tensor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#function-configuration-structure">Function Configuration Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#api-17">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditions-for-applying-the-function-6">Conditions for Applying the Function</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#convert-tensor">Convert Tensor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#api-18">API</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conditions-for-applying-the-function-7">Conditions for Applying the Function</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../final/references.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">embARC Machine Learning Inference Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Helper Functions</a> &raquo;</li>
        
      <li>Basic Functions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/helper_func_desc/basic_functions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="basic-functions">
<h1>Basic Functions<a class="headerlink" href="#basic-functions" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div>This is a set of utility functions for getting information from data
structures and performing various operations on it.</div></blockquote>
<div class="section" id="get-basic-element-size">
<h2>Get Basic Element Size<a class="headerlink" href="#get-basic-element-size" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>This function returns size of tensor basic element in bytes. It
returns 0 if conditions listed the following API are violated.</div></blockquote>
<div class="section" id="api">
<span id="api-15"></span><h3>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Prototype</strong></td>
<td colspan="2"><div class="code c first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uint32_t</span> <span class="n">mli_hlp_count_elem_num</span>
<span class="p">(</span><span class="n">mli_tensor</span> <span class="o">*</span><span class="ow">in</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><strong>Parameters</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">in</span></code></td>
<td>[IN] Pointer to input
tensor</td>
</tr>
<tr class="row-odd"><td><strong>Returns</strong></td>
<td colspan="2">Size of basic element
in bytes</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="conditions-for-applying-the-function">
<span id="conditions-for-applying-the-function-4"></span><h3>Conditions for Applying the Function<a class="headerlink" href="#conditions-for-applying-the-function" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div>The function must point to the tensor of supported element type (see
<a class="reference internal" href="../mli_api_desc/general_considerations.html#mli-elm-enum"><span class="std std-ref">mli_element_type Enumeration</span></a>).</div></blockquote>
</div>
</div>
<div class="section" id="count-number-of-elements">
<h2>Count Number of Elements<a class="headerlink" href="#count-number-of-elements" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>Function counts the number of elements in a tensor starting from the
provided dimension number (dimension numbering starts from 0):</div></blockquote>
<div class="math notranslate nohighlight">
\[num\_ of\_ elements = shape\lbrack start\_ dim\rbrack\ *shape\lbrack start\_ dim + 1\rbrack*\ldots*shape\lbrack last\_ dim\rbrack\]</div>
<blockquote>
<div><p>Where:</p>
<p><code class="docutils literal notranslate"><span class="pre">num_of_elements</span></code> - Number of accounting elements</p>
<p><code class="docutils literal notranslate"><span class="pre">shape</span></code> - Shape of tensor</p>
<p><code class="docutils literal notranslate"><span class="pre">start_dim</span></code> – Start dimension for counting</p>
<p><code class="docutils literal notranslate"><span class="pre">last_dim</span></code> - Last dimension of tensor (tensor rank-1)</p>
<p>Function calculates total number of elements in case
<code class="docutils literal notranslate"><span class="pre">start_dim</span> <span class="pre">=</span> <span class="pre">0</span></code>. Function returns 0 if conditions listed
in the following API are violated.</p>
</div></blockquote>
<div class="section" id="api-16">
<span id="id1"></span><h3>API<a class="headerlink" href="#api-16" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="24%" />
<col width="52%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Prototype</strong></td>
<td colspan="2"><div class="code c first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uint32_t</span> <span class="n">mli_hlp_count_elem_num</span><span class="p">(</span><span class="n">mli_tensor</span> <span class="o">*</span><span class="ow">in</span><span class="p">,</span> <span class="n">uint32_t</span> <span class="n">start_dim</span><span class="p">)</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><strong>Parameters</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">in</span></code></td>
<td>[IN] Pointer to input  tensor</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">start_dim</span></code></td>
<td>[IN] Start dimension for counting</td>
</tr>
<tr class="row-even"><td><strong>Returns</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">elements</span></code></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="conditions-for-applying-the-function-5">
<span id="id2"></span><h3>Conditions for Applying the Function<a class="headerlink" href="#conditions-for-applying-the-function-5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Input must contain valid rank (less then <code class="docutils literal notranslate"><span class="pre">MLI_MAX_RANK</span></code>).</li>
<li><code class="docutils literal notranslate"><span class="pre">start_dim</span></code> must be less than or equal to input rank</li>
</ul>
</div>
</div>
<div class="section" id="point-to-sub-tensor">
<h2>Point to Sub-Tensor<a class="headerlink" href="#point-to-sub-tensor" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This function points to sub tensors in input tensor. This can be
considered as indexing in a multidimensional array without copying.</p>
<p>For example, given a feature map IN in CHW layout of shape [8, 4,
16], the function returns several sequential channels as output
tensor without copying the data. Comparing with python syntax, this
is similar to slice IN[2:4][:][:] and results in a tensor of shape
[2,4,16] that points to channels #2 and #3.</p>
<p>In terms of configuration for considering functions (see
<a class="reference internal" href="#fn-conf-psubt"><span class="std std-ref">Function Configuration Structure</span></a>):</p>
<p><code class="docutils literal notranslate"><span class="pre">start_coord</span> <span class="pre">=</span> <span class="pre">{2};</span> <span class="pre">coord_num=1;</span> <span class="pre">first_out_dim_size=2;</span></code></p>
<p>In the same way, rows can be obtained from one of the channels. IN[3][2:3][:]
results in tensor of shape [1,16] (row #2 of channel#3).
In terms of configuration for considering functions:</p>
<p><code class="docutils literal notranslate"><span class="pre">start_coord</span> <span class="pre">=</span> <span class="pre">{3,</span> <span class="pre">2};</span> <span class="pre">coord_num=2;</span> <span class="pre">first_out_dim_size=1;</span></code></p>
<p>This function performs operations on pointers and does not copy data
(only points to subsequent data in input). For this reason, this
function takes only parameters that can be translated to starting
coordinates and size of required data.</p>
</div></blockquote>
<div class="section" id="function-configuration-structure">
<span id="fn-conf-psubt"></span><h3>Function Configuration Structure<a class="headerlink" href="#function-configuration-structure" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Definition</strong></td>
<td colspan="2"><div class="code c first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="p">{</span>
<span class="n">uint32_t</span>
<span class="n">start_coord</span><span class="p">[</span><span class="n">MLI_MAX_RANK</span> <span class="p">];</span>
<span class="n">uint8_t</span> <span class="n">coord_num</span><span class="p">;</span>
<span class="n">uint8_t</span> <span class="n">first_out_dim_size</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">mli_point_to_subtsr_cfg</span><span class="p">;</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><strong>Fields</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">start_coord</span></code></td>
<td>Coordinates to sub
tensor. Each
coordinate
corresponds to the
dimension of the
input tensor starting
from the first one.</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">coord_num</span></code></td>
<td>Number of coordinates</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">first_out_dim_size</span></code></td>
<td>Size of the first
dimension in output
tensor</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="api-17">
<span id="id3"></span><h3>API<a class="headerlink" href="#api-17" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="22%" />
<col width="56%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Prototype</strong></td>
<td colspan="2"><div class="code c first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mli_status</span> <span class="n">mli_hlp_point_to_subtensor</span><span class="p">(</span>
  <span class="n">const</span> <span class="n">mli_tensor</span> <span class="o">*</span><span class="ow">in</span><span class="p">,</span> <span class="n">const</span> <span class="n">mli_point_to_subtsr_cfg</span> <span class="o">*</span><span class="n">cfg</span><span class="p">,</span> <span class="n">mli_tensor</span> <span class="o">*</span><span class="n">out</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><strong>Parameters</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">in</span></code></td>
<td>[IN] Pointer to input tensor</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">cfg</span></code></td>
<td>[IN] Pointer to the function configuration structure</td>
</tr>
<tr class="row-even"><td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">out</span></code></td>
<td>[OUT] Pointer to output tensor for storing the result</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="conditions-for-applying-the-function-6">
<span id="id4"></span><h3>Conditions for Applying the Function<a class="headerlink" href="#conditions-for-applying-the-function-6" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Input must be a valid tensor (see <a class="reference internal" href="../mli_api_desc/general_considerations.html#mli-tns-struct"><span class="std std-ref">mli_tensor Structure</span></a>)</li>
<li>out must point to tensor structure.</li>
<li>Configuration structure fields have the following conditions:<ul>
<li>The number of coordinates must be less than the input tensor rank</li>
<li>Each coordinate must be less than the corresponding input
dimension size</li>
</ul>
</li>
<li><dl class="first docutils">
<dt>Sum of <code class="docutils literal notranslate"><span class="pre">first_dim_size</span></code> field and the last coordinate must be less</dt>
<dd>than or equal to the corresponding dimension in input tensor</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="convert-tensor">
<h2>Convert Tensor<a class="headerlink" href="#convert-tensor" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This function copies elements from input tensor to output with data
conversion according to the output tensor type parameters.</p>
<p>For example, the function can:</p>
<ul class="simple">
<li>convert data according to new element type: <code class="docutils literal notranslate"><span class="pre">fx16</span></code> to <code class="docutils literal notranslate"><span class="pre">fx8</span></code> and backward</li>
<li>change data according to new data parameter: increase/decrease the
number of fractional bits while keeping the same element type for
FX data</li>
</ul>
</div></blockquote>
<blockquote>
<div><p>Conversion is performed using</p>
<ul class="simple">
<li>rounding when the number of significant bits increases.</li>
<li>saturation when the number of significant bits decreases.</li>
</ul>
</div></blockquote>
<blockquote>
<div><p>This operation does not change tensor shape. It copies it from input
to output.</p>
<p>Kernel can perform in-place computation, but only for conversions
without increasing data size, so that that it does not lead to
undefined behavior. Therefore, output and input might point to exactly the
same memory (but without shift) except <code class="docutils literal notranslate"><span class="pre">fx8</span></code> to <code class="docutils literal notranslate"><span class="pre">fx16</span></code> conversion.
In-place computation might affect performance for some platforms.</p>
</div></blockquote>
<div class="section" id="api-18">
<span id="id5"></span><h3>API<a class="headerlink" href="#api-18" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="50%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Prototype</strong></td>
<td colspan="2"><div class="code c first last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mli_status</span> <span class="n">mli_hlp_convert_tensor</span><span class="p">(</span><span class="n">mli_tensor</span> <span class="o">*</span><span class="ow">in</span><span class="p">,</span> <span class="n">mli_tensor</span> <span class="o">*</span><span class="n">out</span><span class="p">);</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><strong>Parameters</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">in</span></code></td>
<td>[IN] Pointer to input
tensor</td>
</tr>
<tr class="row-odd"><td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">start_dim</span></code></td>
<td>[OUT] Pointer to
output tensor</td>
</tr>
<tr class="row-even"><td><strong>Returns</strong></td>
<td><code class="docutils literal notranslate"><span class="pre">status</span> <span class="pre">code</span></code></td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="conditions-for-applying-the-function-7">
<span id="id6"></span><h3>Conditions for Applying the Function<a class="headerlink" href="#conditions-for-applying-the-function-7" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Input must be a valid tensor (see <a class="reference internal" href="../mli_api_desc/general_considerations.html#mli-tns-struct"><span class="std std-ref">mli_tensor Structure</span></a>).</li>
<li>Before processing the output tensor must contain a valid pointer to a
buffer with sufficient capacity enough for storing the result
(that is, the total amount of elements in input tensor).</li>
<li>The output tensor also must contain valid element type and its
parameter (<code class="docutils literal notranslate"><span class="pre">el_params.fx.frac_bits</span></code>)</li>
<li>Before processing, the output tensor does not have to contain valid
shape and rank - they are copied from input tensor.</li>
</ul>
</div></blockquote>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../final/references.html" class="btn btn-neutral float-right" title="References" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="Helper Functions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Synopsys, Inc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>