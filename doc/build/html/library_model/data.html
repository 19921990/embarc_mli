

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data &mdash; embARC Machine Learning Inference Library 1.00 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Error Codes" href="error_handling.html" />
    <link rel="prev" title="Library Model" href="library_model.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> embARC Machine Learning Inference Library
          

          
          </a>

          
            
            
              <div class="version">
                1.00
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="library_model.html">Library Model</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-types">Data Types</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mli-tensor-structure">mli_tensor Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mli-element-type-enumeration">mli_element_type Enumeration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mli-element-params-union">mli_element_params Union</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kernel-specific-configuration-structures">Kernel Specific Configuration Structures</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#data-layout-of-multidimensional-feature-maps">Data Layout of Multidimensional Feature Maps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="error_handling.html">Error Codes</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html">Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="hw_dependencies_config.html">Hardware Dependencies and Configurability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../MLI_FP_data_format/MLI_FP_data_format.html">MLI Fixed-Point Data Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MLI_kernels/MLI_kernels.html">MLI Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MLI_helpers/MLI_helpers.html">MLI Helpers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Examples_Tutorials/Examples_Tutorials.html">Examples and Tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">embARC Machine Learning Inference Library</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="library_model.html">Library Model</a> &raquo;</li>
        
      <li>Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/library_model/data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="data">
<span id="id1"></span><h1>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="data-types">
<span id="id2"></span><h2>Data Types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h2>
<p>This library is intended to work with structured data types. Each data type groups related parameters in one entity as defined in .<strong>/include/mli_types.h</strong> .</p>
<div class="section" id="mli-tensor-structure">
<span id="mli-tns-struct"></span><h3>mli_tensor Structure<a class="headerlink" href="#mli-tensor-structure" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">mli_tensor</span></code> is the main container type for input and output data that
must be processed by ML algorithm. <code class="docutils literal notranslate"><span class="pre">mli_tensor</span></code> represents
multi-dimensional arrays of a particular shape and includes not only
a data, but also its shape, type, and other data-specific parameters.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The term “data” includes input
features, output features,
layer weights, and biases. It
does not include layer
parameters such as padding or
stride for convolutional
primitives. This data
representation is common for
neural networks and other
machine learning tasks.</p>
</div>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="n">_mli_tensor</span> <span class="p">{</span>
   <span class="n">void</span> <span class="o">*</span><span class="n">data</span><span class="p">;</span>
   <span class="n">uint32_t</span> <span class="n">capacity</span><span class="p">;</span>
   <span class="n">uint32_t</span> <span class="n">shape</span><span class="p">[</span><span class="n">MLI_MAX_RANK</span><span class="p">];</span>
   <span class="n">uint32_t</span> <span class="n">rank</span><span class="p">;</span>
   <span class="n">mli_element_type</span> <span class="n">el_type</span><span class="p">;</span>
   <span class="n">mli_element_params</span> <span class="n">el_params</span><span class="p">;</span>
<span class="p">}</span> <span class="n">mli_tensor</span><span class="p">;</span>
</pre></div>
</div>
<span id="mli-tensor-struc"></span><table border="1" class="colwidths-given docutils" id="id3">
<caption><span class="caption-text">mli_tensor Structure Fields</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="15%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Field Name</th>
<th class="head">Field Type</th>
<th class="head">Field Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">data</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code></td>
<td>Pointer to memory
with tensor data</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">capacity</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">uint32_t</span></code></td>
<td>Size in bytes of the
available memory,
allocated at the
address in data field</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">shape</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">uint32_t[]</span></code></td>
<td>Array with tensor
dimensions.
Dimensions must be
stored in direct
order starting from
the one with the
highest stride
between data
portions. For
example, for a matrix
of shape
[rows][columns],
shape[0] = rows and
shape[1] = columns</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">rank</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">uint32_t</span></code></td>
<td>Tensor rank with
countable number of
dimensions. Must be
less or equal to
value of MLI_MAX_RANK</td>
</tr>
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">el_type</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mli_element</span></code></td>
<td>Type of elements
stored in the tensor.
For details, see
<a class="reference internal" href="#mli-elm-enum"><span class="std std-ref">mli_element_type Enumeration</span></a></td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">el_params</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">mli_element_params</span></code></td>
<td>Parameters of
elements stored in
tensor. For details,
see
<a class="reference internal" href="#mli-el-prm-u"><span class="std std-ref">mli_element_params Union</span></a></td>
</tr>
</tbody>
</table>
<p>Some primitives, such as slope coefficient for leaky ReLU, might
require scalar parameters which explicitly involve calculations (not
primitive configuration parameter). Such scalar
inputs/outputs are also passed to primitive as tensor of rank=1 and
shape[0]=1. For some primitives it is possible to provide scalar
value as tensor with zero rank and single value stored directly in
data field (not pointed by it).</p>
<p>All input tensors passed to primitives typically must be valid with
fields that are not conflicting. Examples of field conflicts are:</p>
<ul class="simple">
<li>Tensor shape declares more data than tensors capacity</li>
<li>Tensor rank is bigger than MLI_MAX_RANK</li>
<li>Data pointer is invalid (NULL pointer) except cases when it is
allowed to pass scalar value directly in data field</li>
<li>Tensor is empty (total number of elements is zero)</li>
</ul>
</div>
<div class="section" id="mli-element-type-enumeration">
<span id="mli-elm-enum"></span><h3>mli_element_type Enumeration<a class="headerlink" href="#mli-element-type-enumeration" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">mli_element_type</span></code> defines basic element type stored in tensor
structure (data field).</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">enum</span> <span class="p">{</span>
   <span class="n">MLI_EL_FX_8</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
   <span class="n">MLI_EL_FX_16</span><span class="p">,</span>
<span class="p">}</span> <span class="n">mli_element_type</span><span class="p">;</span>
</pre></div>
</div>
<p></p>
<span id="mli-element-type-val-desc"></span><table border="1" class="colwidths-auto docutils" id="id4">
<caption><span class="caption-text">mli_element_type Values Description</span><a class="headerlink" href="#id4" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Value</th>
<th class="head">Field Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">MLI_EL_FX_8</span></code></td>
<td>8-bit deep, fixed-point data with
configurable number of fractional
bits (see <a class="reference internal" href="../MLI_FP_data_format/MLI_FP_data_format.html#mli-fpd-fmt"><span class="std std-ref">MLI Fixed-Point Data Format</span></a>).
Data container is int8_t.
Also mentioned in this
document as fx8 type.</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal notranslate"><span class="pre">MLI_EL_FX_16</span></code></td>
<td>16-bit deep fixed-point data with
configurable number of fractional
bits (see <a class="reference internal" href="../MLI_FP_data_format/MLI_FP_data_format.html#mli-fpd-fmt"><span class="std std-ref">MLI Fixed-Point Data Format</span></a>).
Data container is int16_t.
Also mentioned in this
document as fx16 type.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="mli-element-params-union">
<span id="mli-el-prm-u"></span><h3>mli_element_params Union<a class="headerlink" href="#mli-element-params-union" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">mli_element_params</span></code> union stores data type parameters required for
arithmetical operations with tensor elements.</p>
<div class="code c highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">union</span> <span class="n">_mli_element_params</span> <span class="p">{</span>
   <span class="n">struct</span><span class="p">{</span>
      <span class="n">unsigned</span> <span class="n">frac_bits</span><span class="p">;</span>
   <span class="p">}</span> <span class="n">fx</span><span class="p">;</span>
<span class="p">}</span> <span class="n">mli_element_params</span><span class="p">;</span>
</pre></div>
</div>
<p>Parameters are wrapped into union for future library extensibility.
The current version supports only fixed point data with configurable
number of fractional bits (see <a class="reference internal" href="../MLI_FP_data_format/MLI_FP_data_format.html#mli-fpd-fmt"><span class="std std-ref">MLI Fixed-Point Data Format</span></a>) and union
can be interpreted only as the following structure.</p>
<p></p>
<span id="mli-element-params-struct-fields"></span><table border="1" class="colwidths-auto docutils" id="id5">
<caption><span class="caption-text">mli_element_params Structure Fields</span><a class="headerlink" href="#id5" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Union
Interpretation</th>
<th class="head">Field</th>
<th class="head">Field Type</th>
<th class="head">Field
Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal notranslate"><span class="pre">fx</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">frac_bits</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">uint8_t</span></code></td>
<td>Number of
fractional
bits.
Non-negative
value.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="kernel-specific-configuration-structures">
<h3>Kernel Specific Configuration Structures<a class="headerlink" href="#kernel-specific-configuration-structures" title="Permalink to this headline">¶</a></h3>
<p>Significant number of primitives must be configured by specific
parameters, which influence calculations and results, but not
directly related to input data. For example, padding and stride
values are parameters of convolution layer and the type of ReLU is a
parameter for ReLU transform layer. All specific parameters for
particular primitive type are grouped into structures. This document
describes these structures along with the primitive description they
relate to.</p>
</div>
</div>
<div class="section" id="data-layout-of-multidimensional-feature-maps">
<span id="data-muldim"></span><h2>Data Layout of Multidimensional Feature Maps<a class="headerlink" href="#data-layout-of-multidimensional-feature-maps" title="Permalink to this headline">¶</a></h2>
<p>Functions of convolution and pooling groups deal with
multi-dimensional feature maps which might be considered as images.
In general, these maps have three dimensions with following names:
height, width, and channels (also called depth). Despite logical
organization, multidimensional feature maps are stored in memory as
continuous arrays. Order of elements depends on the order of
dimensions – data layout. <a class="reference internal" href="#multidim-data-layout"><span class="std std-ref">Multidimensional Data Layout</span></a> describes
two supported and traditionally used data layouts – HWC and CHW.</p>
<p></p>
<span id="multidim-data-layout"></span><table border="1" class="colwidths-auto docutils" id="id6">
<caption><span class="caption-text">Multidimensional Data Layout</span><a class="headerlink" href="#id6" title="Permalink to this table">¶</a></caption>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Designation</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>HWC</td>
<td>The smallest stride between
dimension elements in memory is
for C (channel or depth) followed
by the width and the height. The
height is the least frequently
changing index. For example
<em>In[32][16][8]</em> for this case is
a feature map with 32 rows
(<strong>h</strong> eight), 16 columns
(<strong>w</strong> idth) and 8
<strong>c</strong> hannels.</td>
</tr>
<tr class="row-odd"><td>CHW</td>
<td>The smallest stride between
dimension elements in memory is
for W (width). Then height. The
channel is least frequently
changing index. For example
<em>In[32][16][8]</em> for this case is
a feature map with 32
<strong>c</strong> hannels, 16 rows
(<strong>h</strong> eight) and 8 columns
(<strong>w</strong> idth).</td>
</tr>
</tbody>
</table>
<p>Due to algorithmic reasons, HWC layout provides higher data locality
for some functions, and CHW layout does so for others.</p>
<p>“Data locality” means the data disposition in memory where elements
consistently used by algorithm are stored in memory as close as
possible (in ideal case, contiguously). Low data locality could
reduce performance of systems with cache. For the layouts supported
by particular kernels, see <a class="reference internal" href="functions.html#fns"><span class="std std-ref">Functions</span></a>. Current version of MLI Library
focuses on optimization of kernels for CHW layout.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="error_handling.html" class="btn btn-neutral float-right" title="Error Codes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="library_model.html" class="btn btn-neutral float-left" title="Library Model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Synopsys, Inc

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>